---
import BaseHead from '../components/BaseHead.astro';
import ProfileCard from '../components/ProfileCard.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../config';
// Fetch latest posts for Logbook
type Post = {
  frontmatter: { publishDate: string; title: string };
  url: string;
};
const posts: Post[] = (
  (await Astro.glob('./blog/*.{md,mdx}')) as unknown as Post[]
)
  .sort(
    (a: Post, b: Post) =>
      new Date(b.frontmatter.publishDate).valueOf() -
      new Date(a.frontmatter.publishDate).valueOf()
  )
  .slice(0, 10);

const projects = [
  {
    name: 'Techno Bot',
    description: 'Best entertainment bot for your Discord server',
    url: 'https://technobot.xyz',
    isInactive: false,
  },
  {
    name: 'Dclist.net',
    description: 'Discord bot list.',
    isInactive: true,
  },
];

const work = [
  {
    name: 'Techno Bot',
    description: 'Best entertainment bot for your Discord server',
    url: 'https://technobot.xyz',
    past: false,
    role: 'Founder',
  },
  {
    name: 'Sellibra',
    description: 'Sellibra',
    url: 'https://www.linkedin.com/company/sellibra/',
    past: true,
    role: 'Contract Full Stack Developer',
  },
  {
    name: 'Digiens Academy',
    description: 'Digiens Academy',
    url: 'https://www.linkedin.com/company/digiensacademy/',
    past: true,
    role: 'Contract Full Stack Developer',
  },
];
---

<!DOCTYPE html>
<html lang='en-us'>
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <main class='container'>
      <aside>
        <ProfileCard
          name='Eren BaltacÄ±'
          avatarSrc='/placeholder-social.jpg'
          occupation='Solopreneur'
          location='Turkiye'
        >
          <nav style='font-size:14px'>
            <a href='mailto:ernbaltaci@gmail.com'>Email</a>
            |
            <a href='/blog'>Blog</a>
            |
            <a
              href='https://github.com/ernbaltaci'
              target='_blank'
              rel='noopener'>Github</a
            >
          </nav>
        </ProfileCard>
      </aside>

      <section>
        <h3
          class='accent'
          style='margin:0 0 12px 0; background-color: #111827; padding: 8px 16px; border-radius: 12px;'
        >
          Work
        </h3>
        <div class='card'>
          <div
            style='display:grid;grid-template-columns:120px 1fr;gap:12px;align-items:start'
          >
            <div class='muted'>Current</div>
            <ul style='margin:0;padding-left:18px;list-style:none'>
              {
                work
                  .filter((w) => !w.past)
                  .map((w) => (
                    <li style='margin:2px 0'>
                      {w.role} @
                      <a href={w.url} target='_blank' rel='noopener'>
                        {w.name}
                      </a>
                    </li>
                  ))
              }
            </ul>

            <div class='muted'>Past</div>
            <ul style='margin:0;padding-left:18px;list-style:none'>
              {
                work
                  .filter((w) => w.past)
                  .map((w) => (
                    <li style='margin:2px 0'>
                      {w.role} @
                      <a href={w.url} target='_blank' rel='noopener'>
                        {w.name}
                      </a>
                    </li>
                  ))
              }
            </ul>
          </div>
        </div>

        <h3
          class='accent'
          style='margin:0 0 12px 0; background-color: #111827; padding: 8px 16px; border-radius: 12px;'
        >
          Projects
        </h3>
        <div class='card'>
          <div
            style='display:grid;grid-template-columns:120px 1fr;gap:8px;align-items:start'
          >
            <div class='muted'>Active</div>
            <div>
              {
                projects
                  .filter((project) => !project.isInactive)
                  .map((project) => (
                    <a href={project.url} target='_blank' rel='noopener'>
                      {project.name}
                    </a>
                  ))
              }
            </div>
            <div class='muted'>Inactive</div>
            <div>
              {
                projects
                  .filter((project) => project.isInactive)
                  .map((project) => (
                    <a
                      href={project.url || '#'}
                      target='_blank'
                      rel='noopener'
                      class={project.url ? '' : 'muted'}
                    >
                      {project.name}
                    </a>
                  ))
              }
            </div>
          </div>
        </div>

        <h3
          class='accent'
          style='margin:20px 0 12px 0; background-color: #111827; padding: 8px 16px; border-radius: 12px;'
        >
          Blog
        </h3>
        <div class='card'>
          <ul style='margin:0;padding-left:18px;list-style:none'>
            {
              posts.map((post) => (
                <li style='display:flex;gap:12px'>
                  <time
                    datetime={post.frontmatter.publishDate}
                    class='muted'
                    style='flex:0 0 130px'
                  >
                    {new Date(post.frontmatter.publishDate).toLocaleDateString(
                      'en-us',
                      { year: 'numeric', month: 'short', day: 'numeric' }
                    )}
                  </time>
                  <a href={post.url}>{post.frontmatter.title}</a>
                </li>
              ))
            }
          </ul>
        </div>
      </section>
    </main>
  </body>
</html>

